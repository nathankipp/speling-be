{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["words","AZ","split","STORAGE_KEYS","INITIAL_STATE","step","score","word","undefined","choices","ans","high","mode","spelled","spoken","reset","window","confirm","localStorage","setItem","location","reload","getWord","completed","remainingWords","difference","length","idx","Math","floor","random","scoreBoard","className","playButton","ref","onClick","current","currentTime","play","App","props","spell","state","uniq","letter","includes","push","update","print","char","guess","concat","JSON","stringify","setTimeout","start","remove","replace","giveUp","speak","newState","countdown","cb","audio","audioRef","React","createRef","this","setState","prevState","getItem","parse","map","x","e","read","src","process","sort","yes","done","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.03794e94.chunk.js","sourcesContent":["import React from 'react';\nimport uniq from  'lodash/uniq';\nimport difference from 'lodash/difference';\nimport './App.css';\n// import words from './1g-words';\nconst words = ['all', 'am'];\nconst AZ = 'abcdefghijklmnopqrstuvwxyz'.split('');\n\nconst STORAGE_KEYS = {\n  high: 'speling-be',\n  spelled: 'spelled',\n  spoken: 'spoken',\n};\n\nconst INITIAL_STATE = {\n  step: 0,\n  score: 0,\n  word: undefined,\n  choices: [],\n  ans: '',\n  high: 0,\n  mode: STORAGE_KEYS.spelled,\n  spelled: [],\n  spoken: [],\n};\n\nconst reset = () => {\n  if (window.confirm(\"Reset words and high score?\")) {\n    window.localStorage.setItem(STORAGE_KEYS.high, 0);\n    window.localStorage.setItem(STORAGE_KEYS.spelled, '[]');\n    window.localStorage.setItem(STORAGE_KEYS.spoken, '[]');\n    window.location.reload();\n  }\n};\n\nconst getWord = (completed = []) => {\n  const remainingWords = difference(words, completed);\n  if (remainingWords.length === 0) {\n    return '';\n  }\n  const idx = Math.floor(Math.random() * remainingWords.length);\n  return remainingWords[idx];\n}\n\nconst scoreBoard = (score, high) => (\n  <div className=\"score\">\n    <div>Score: {score}</div>\n    <div>High: {high}</div>\n  </div>\n);\n\nconst playButton = (ref) => (\n  <button className=\"play\" onClick={() => {\n    ref.current.currentTime = 0;\n    ref.current.play();\n  }}> &#128266; </button>\n);\n\nconst getViews = (state) => ({\n  start: (start) => {\n    const { score, high, spelled, spoken } = state;\n    return (\n      <div className=\"app go\">\n        {scoreBoard(score, high)}\n        <div>\n          <div>Get ready to spell!</div>\n          <div className=\"status\">There are {words.length} words</div>\n          <div className=\"status\">\n            {difference(words, spelled).length} left to read & spell\n          </div>\n          <div className=\"status\">\n            {difference(words, spoken).length} left to hear & spell\n          </div>\n          <button className=\"reset\" onClick={() => reset()}>Reset</button>\n        </div>\n        <div><button className=\"go\" onClick={start}>Go</button></div>\n      </div>\n    );\n  },\n  read: () => {\n    const { score, high, word, countdown } = state;\n    return (\n      <div className=\"app read\">\n        {scoreBoard(score, high)}\n        <div>{word}</div>\n        <div>{countdown}</div>\n      </div>\n    );\n  },\n  spell: (audioRef, print, remove, giveUp) => {\n    const { word, mode, score, high, choices, ans } = state;\n    return (\n      <div className=\"app spell\">\n        <audio ref={audioRef} src={`${process.env.PUBLIC_URL}/audio/${word}.m4a`} />\n        {scoreBoard(score, high)}\n        <div>&nbsp;{ans || playButton(audioRef)}&nbsp;</div>\n        <div>\n          {choices.sort().map(letter => (\n            <button key={letter} onClick={() => print(letter)}>{letter}</button>\n          ))}\n          <button className=\"remove\" onClick={remove}> &larr; </button>\n          {playButton(audioRef)}\n          <button className=\"give-up\" onClick={() => {\n            if (window.confirm(\"Give up?\")) { giveUp(); }\n          }}> &#128534; </button>\n        </div>\n      </div>\n    );\n  },\n  yes: () => {\n    const { score, high, ans } = state;\n    return (\n      <div className=\"app yes\">\n        {scoreBoard(score, high)}\n        <div>{ans}</div>\n        <div>Yes!!!</div>\n      </div>\n    )\n  },\n  done: () => {\n    const { score, high } = state;\n    return (\n      <div className=\"app winner\">\n        {scoreBoard(score, high)}\n        <div>&#129321;</div>\n        <div>All done!</div>\n        <button className=\"reset\" onClick={() => reset()}>Play again</button>\n      </div>\n    );\n  },\n});\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = INITIAL_STATE;\n    this.audioRef = React.createRef();\n  }\n\n  update(newState, cb = () => {}) {\n    this.setState(prevState => ({\n      ...prevState,\n      ...newState,\n    }), cb);\n  }\n\n  componentDidMount() {\n    const high = window.localStorage?.getItem(STORAGE_KEYS.high) || 0;\n    if (high === null) {\n      window.localStorage.setItem(STORAGE_KEYS.high, 0);\n    }\n\n    let spelled = window.localStorage?.getItem(STORAGE_KEYS.spelled);\n    try {\n      spelled = JSON.parse(spelled).map(x => x);\n    } catch(e) {\n      spelled = [];\n    }\n\n    let spoken = window.localStorage?.getItem(STORAGE_KEYS.spoken);\n    try {\n      spoken = JSON.parse(spelled).map(x => x);\n    } catch(e) {\n      spoken = [];\n    }\n\n    const step = difference(words, uniq([...spelled, ...spoken])).length === 0\n      ? 4 // winner\n      : INITIAL_STATE.step;\n\n    this.update({ step, high, spelled, spoken });\n  }\n\n  spell = () => {\n    const { word } = this.state;\n    const choices = uniq(word.split(''));\n    while (choices.length < 15) {\n      const idx = Math.floor(Math.random() * 26);\n      const letter = AZ[idx];\n      if (!choices.includes(letter)) {\n        choices.push(letter);\n      }\n    }\n\n    this.update({ step: 2, choices });\n  }\n\n  print = (char) => {\n    let { ans, word, score, high, mode, spelled, spoken } = this.state;\n    const guess = ans.concat(char);\n    const step = guess === word ? 3 : 2;\n\n    if (step === 3) {\n      score = score + 1;\n      high = score > high ? score : high;\n      window.localStorage.setItem(STORAGE_KEYS.high, high);\n\n      if (mode === STORAGE_KEYS.spelled) {\n        spelled = [...spelled, word];\n        window.localStorage.setItem(STORAGE_KEYS.spelled, JSON.stringify(spelled));\n      } else {\n        spoken = [...spoken, word];\n        window.localStorage.setItem(STORAGE_KEYS.spoken, JSON.stringify(spoken));\n      }\n\n      const update = () => this.update(\n        { score, high, spelled, spoken },\n        () => this.start()\n      );\n      setTimeout(update, 2000);\n    }\n\n    this.update({ ans: guess, step });\n  }\n\n  remove = () => {\n    const { ans } = this.state;\n    this.update({ ans: ans.replace(/.$/, '') });\n  }\n\n  giveUp = () => {\n    const { high, spelled } = this.state;\n    this.update({ ...INITIAL_STATE, score: 0, high, spelled });\n  }\n\n  start = () => {\n    const { spelled, spoken } = this.state;\n\n    const spell = getWord(spelled);\n    const speak = getWord(spoken);\n    const step = spell ? 1 : speak ? 2 : 4;\n    const newState = {\n      step,\n      mode: spell ? STORAGE_KEYS.spelled : STORAGE_KEYS.spoken,\n      word: spell || speak,\n      ans: '',\n      countdown: 3\n    }\n\n    const cb = spell\n        ? () => {\n          setTimeout(() => this.update({ countdown: 2 }), 1000);\n          setTimeout(() => this.update({ countdown: 1 }), 2000);\n          setTimeout(() => this.spell(), 3000);\n        }\n        : () => {\n          this.spell();\n          setTimeout(() => {\n            const audio = this.audioRef.current;\n            audio.currentTime = 0;\n            audio.play();\n          }, 250);\n        }\n    this.update(newState, step < 4 ? cb : undefined);\n  }\n\n  render() {\n    const { start, read, spell, yes, done } = getViews(this.state);\n    switch(this.state.step) {\n      case 0: return start(this.start);\n      case 1: return read();\n      case 2: return spell(this.audioRef, this.print, this.remove, this.giveUp);\n      case 3: return yes();\n      case 4: return done();\n    }\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}